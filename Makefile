##################################################
# Variables ######################################
##################################################

Bin=./scripts

##################################################
# Default ########################################
##################################################
default: run

.PHONY: default

##################################################
# Install Dependencies ###########################
##################################################
configure:
	@exec nix-build

.PHONY: configure

##################################################
# Run ############################################
##################################################
run: run-via-nixpkgs

.PHONY: run

##################################################
run-via-package-dot-el:
	@exec emacs

.PHONY: run-via-package-dot-el

##################################################
run-via-nixpkgs:
	@exec ${Bin}/run.sh

.PHONY: run-via-nixpkgs 

##################################################
run-quiet:
	@exec ${Bin}/quiet.sh

.PHONY: run-quiet

##################################################
# Build ##########################################
##################################################
build:
	@exec ${Bin}/build.sh

.PHONY: build 

##################################################
# install:
# 	@exec ${Bin}/install.sh #TODO
#
# .PHONY: install 

##################################################
# Test ###########################################
##################################################
debug: configure
	@exec ./result/bin/emacs --debug-init --no-desktop

.PHONY: debug

##################################################
test: configure
	@exec ./result/bin/emacs --debug-init

.PHONY: test

#TODO	@exec SBOO_EMACS_TEST=1 emacs --debug-init

##################################################

##################################################